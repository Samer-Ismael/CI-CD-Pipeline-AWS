# the version of the build spec
version: 0.2

# In the build phase, we are using Maven to build the project
# In the post_build phase, we are echoing a message to indicate that the build has completed
phases:
  build:
    commands:
      - echo "Build phase"
      - mvn clean package

  test:
    commands:
      - echo "Test phase"
      - mvn test # Run your unit tests with Maven
      - echo "Unit tests passed" # if the tests pass, proceed to deployment

  post_build:
    commands:
      - echo "Deploying..." # Proceed to deployment if tests pass
      - echo "Deployment complete!"

# Here I just give my jar file a name and discard the paths
# I change the name of the jar file to server.jar in pom.xml file
# so that I can easily reference it here
artifacts:
  files:
    - target/server.jar
  discard-paths: yes
